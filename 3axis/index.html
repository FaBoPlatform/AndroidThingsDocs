


<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.5">
    
    
      
        <title>3Axis - FaBo Android Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.df84b5fe.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    <body dir="">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3axis" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="">
    <a href=".." title="FaBo Android Docs" class="md-header-nav__button md-logo" aria-label="FaBo Android Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            FaBo Android Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              3Axis
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FaBo Android Docs" class="md-nav__button md-logo" aria-label="FaBo Android Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    FaBo Android Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="FaBo AndroidThings Docs" class="md-nav__link">
      FaBo AndroidThings Docs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../201_3axis/" title="201 3Axis" class="md-nav__link">
      201 3Axis
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../203_color/" title="203 Color" class="md-nav__link">
      203 Color
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../206_uv/" title="206 UV" class="md-nav__link">
      206 UV
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../217_ambient/" title="201 3Axis" class="md-nav__link">
      201 3Axis
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        3Axis
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="3Axis" class="md-nav__link md-nav__link--active">
      3Axis
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目次
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ソース
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3axisui/" title="3Axis" class="md-nav__link">
      3Axis
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../SUMMARY/" title="SUMMARY" class="md-nav__link">
      SUMMARY
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../button/" title="Button" class="md-nav__link">
      Button
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../color/" title="Color" class="md-nav__link">
      Color
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../colorui/" title="Color" class="md-nav__link">
      Color
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../colorui2/" title="Color" class="md-nav__link">
      Color
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent00/" title="Intent" class="md-nav__link">
      Intent
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent01/" title="暗黙的Intent" class="md-nav__link">
      暗黙的Intent
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent03/" title="Intentでカメラを操作" class="md-nav__link">
      Intentでカメラを操作
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent04/" title="Intentでビデオを操作" class="md-nav__link">
      Intentでビデオを操作
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent05/" title="Intentを作成する" class="md-nav__link">
      Intentを作成する
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../led/" title="LED" class="md-nav__link">
      LED
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../lib/" title="FaBo libtary" class="md-nav__link">
      FaBo libtary
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../peripheral/" title="Peripheral" class="md-nav__link">
      Peripheral
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../robotarm/" title="RobotARM" class="md-nav__link">
      RobotARM
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../servo/" title="Servo" class="md-nav__link">
      Servo
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../uart/" title="UART" class="md-nav__link">
      UART
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui01/" title="FindViewById" class="md-nav__link">
      FindViewById
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui02/" title="XMLでのLayout" class="md-nav__link">
      XMLでのLayout
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui03/" title="XMLでのLayout2" class="md-nav__link">
      XMLでのLayout2
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui04/" title="Button" class="md-nav__link">
      Button
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui05/" title="TextView" class="md-nav__link">
      TextView
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui06/" title="EditText" class="md-nav__link">
      EditText
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui07/" title="電卓の作成" class="md-nav__link">
      電卓の作成
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../update/" title="Android Things Console" class="md-nav__link">
      Android Things Console
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../userdriver/" title="UserDriver" class="md-nav__link">
      UserDriver
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../webview01/" title="WebView表示" class="md-nav__link">
      WebView表示
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目次
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ソース
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="3axis">3Axis</h1>
<p>I2Cに3Axisを接続し、100ms毎に加速度を取得。</p>
<h2 id="_1">ソース</h2>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=kn>package</span> <span class=nn>com.example.vssadmin.myapplication</span><span class=p>;</span>

<span class=kn>import</span> <span class=nn>android.app.Activity</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.os.Bundle</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.os.Handler</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.util.Log</span><span class=p>;</span>

<span class=kn>import</span> <span class=nn>com.google.android.things.pio.Gpio</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>com.google.android.things.pio.GpioCallback</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>com.google.android.things.pio.I2cDevice</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>com.google.android.things.pio.PeripheralManager</span><span class=p>;</span>

<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=p>;</span>

<span class=cm>/**</span>
<span class=cm> * Skeleton of an Android Things activity.</span>
<span class=cm> * &lt;p&gt;</span>
<span class=cm> * Android Things peripheral APIs are accessible through the class</span>
<span class=cm> * PeripheralManagerService. For example, the snippet below will open a GPIO pin and</span>
<span class=cm> * set it to HIGH:</span>
<span class=cm> *</span>
<span class=cm> * &lt;pre&gt;{@code</span>
<span class=cm> * PeripheralManagerService service = new PeripheralManagerService();</span>
<span class=cm> * mLedGpio = service.openGpio(&quot;BCM6&quot;);</span>
<span class=cm> * mLedGpio.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);</span>
<span class=cm> * mLedGpio.setValue(true);</span>
<span class=cm> * }&lt;/pre&gt;</span>
<span class=cm> * &lt;p&gt;</span>
<span class=cm> * For more complex peripherals, look for an existing user-space driver, or implement one if none</span>
<span class=cm> * is available.</span>
<span class=cm> *</span>
<span class=cm> * @see &lt;a href=&quot;https://github.com/androidthings/contrib-drivers#readme&quot;&gt;https://github.com/androidthings/contrib-drivers#readme&lt;/a&gt;</span>
<span class=cm> */</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>MainActivity</span> <span class=kd>extends</span> <span class=n>Activity</span> <span class=p>{</span>

    <span class=c1>// I2C Device Name</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>I2C_DEVICE_NAME</span> <span class=o>=</span> <span class=s>&quot;I2C1&quot;</span><span class=p>;</span>
    <span class=c1>// I2C Slave Address</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>I2C_ADDRESS</span> <span class=o>=</span> <span class=mh>0x53</span><span class=p>;</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>String</span> <span class=n>TAG</span> <span class=o>=</span> <span class=s>&quot;THINGS&quot;</span><span class=p>;</span>
    <span class=kd>private</span> <span class=n>Handler</span> <span class=n>mHandler</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Handler</span><span class=p>();</span>
    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>INTERVAL_BETWEEN_AXIS_MS</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>

    <span class=kd>private</span> <span class=n>I2cDevice</span> <span class=n>mDevice</span><span class=p>;</span>
    <span class=cm>/** Who_am_i register */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_DEVID_REG</span> <span class=o>=</span> <span class=mh>0x00</span><span class=p>;</span>
    <span class=cm>/** Data Format Control */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_DATA_FORMAT_REG</span> <span class=o>=</span> <span class=mh>0x31</span><span class=p>;</span>
    <span class=cm>/** Power-saving features control */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_POWER_CTL_REG</span> <span class=o>=</span> <span class=mh>0x2D</span><span class=p>;</span>
    <span class=cm>/** Power-saving features control */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_3AIXS</span> <span class=o>=</span> <span class=mh>0x32</span><span class=p>;</span>
    <span class=cm>/** SELF Test ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_SELF_TEST_ON</span> <span class=o>=</span> <span class=p>(</span><span class=kt>byte</span><span class=p>)</span> <span class=mb>0b10000000</span><span class=p>;</span>
    <span class=cm>/** SELF Test OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_SELF_TEST_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** SELF SPI ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_SPI_ON</span> <span class=o>=</span> <span class=mb>0b01000000</span><span class=p>;</span>
    <span class=cm>/** SELF SPI OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_SPI_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** INT_INVERT ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_INT_INVERT_ON</span> <span class=o>=</span> <span class=mb>0b00100000</span><span class=p>;</span>
    <span class=cm>/** INT_INVERT OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_INT_INVERT_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** FULL_RES ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_FULL_RES_ON</span> <span class=o>=</span> <span class=mb>0b00001000</span><span class=p>;</span>
    <span class=cm>/** FULL_RES OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_FULL_RES_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** JUSTIFY ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_JUSTIFY_ON</span> <span class=o>=</span> <span class=mb>0b00000100</span><span class=p>;</span>
    <span class=cm>/** JUSTIFY OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_JUSTIFY_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** RANGE 2G */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_RANGE_2G</span> <span class=o>=</span> <span class=mb>0b00</span><span class=p>;</span>
    <span class=cm>/** RANGE 4G */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_RANGE_4G</span> <span class=o>=</span> <span class=mb>0b01</span><span class=p>;</span>
    <span class=cm>/** RANGE 8G */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_RANGE_8G</span> <span class=o>=</span> <span class=mb>0b10</span><span class=p>;</span>
    <span class=cm>/** RANGE 16G */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_RANGE_16G</span> <span class=o>=</span> <span class=mb>0b11</span><span class=p>;</span>
    <span class=cm>/** AUTO SLEEP ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_AUTO_SLEEP_ON</span> <span class=o>=</span> <span class=mb>0b00010000</span><span class=p>;</span>
    <span class=cm>/** AUTO SLEEP OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_AUTO_SLEEP_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** AUTO MEASURE ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_MEASURE_ON</span> <span class=o>=</span> <span class=mb>0b00001000</span><span class=p>;</span>
    <span class=cm>/** AUTO MEASURE OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_MEASURE_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** SLEEP ON */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_SLEEP_ON</span> <span class=o>=</span> <span class=mb>0b00000100</span><span class=p>;</span>
    <span class=cm>/** SLEEP OFF */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_SLEEP_OFF</span> <span class=o>=</span> <span class=mb>0b00000000</span><span class=p>;</span>
    <span class=cm>/** WAKEUP 8Hz */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_WAKEUP_8HZ</span> <span class=o>=</span> <span class=mb>0b00</span><span class=p>;</span>
    <span class=cm>/** WAKEUP 4Hz */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_WAKEUP_4HZ</span> <span class=o>=</span> <span class=mb>0b01</span><span class=p>;</span>
    <span class=cm>/** WAKEUP 2Hz */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_WAKEUP_2HZ</span> <span class=o>=</span> <span class=mb>0b10</span><span class=p>;</span>
    <span class=cm>/** WAKEUP 1Hz */</span>
    <span class=kd>private</span> <span class=kt>byte</span> <span class=n>ADXL345_WAKEUP_1HZ</span> <span class=o>=</span> <span class=mb>0b11</span><span class=p>;</span>
    <span class=nd>@Override</span>
    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onCreate</span><span class=p>(</span><span class=n>Bundle</span> <span class=n>savedInstanceState</span><span class=p>)</span> <span class=p>{</span>
        <span class=kd>super</span><span class=p>.</span><span class=na>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>);</span>
        <span class=c1>// Attempt to access the I2C device</span>
        <span class=k>try</span> <span class=p>{</span>
            <span class=n>PeripheralManager</span> <span class=n>manager</span> <span class=o>=</span> <span class=n>PeripheralManager</span><span class=p>.</span><span class=na>getInstance</span><span class=p>();</span>
            <span class=n>mDevice</span> <span class=o>=</span> <span class=n>manager</span><span class=p>.</span><span class=na>openI2cDevice</span><span class=p>(</span><span class=n>I2C_DEVICE_NAME</span><span class=p>,</span> <span class=n>I2C_ADDRESS</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>Log</span><span class=p>.</span><span class=na>w</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span> <span class=s>&quot;Unable to access I2C device&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>try</span> <span class=p>{</span>
            <span class=c1>// Who am I.</span>
            <span class=kt>byte</span> <span class=n>value</span> <span class=o>=</span> <span class=n>mDevice</span><span class=p>.</span><span class=na>readRegByte</span><span class=p>(</span><span class=mh>0x00</span><span class=p>);</span>
            <span class=k>if</span><span class=p>((</span><span class=n>value</span> <span class=o>&amp;</span> <span class=mh>0xff</span><span class=p>)</span> <span class=o>==</span> <span class=mh>0xe5</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>Log</span><span class=p>.</span><span class=na>i</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span> <span class=s>&quot;Device is ADXL345&quot;</span><span class=p>);</span>
            <span class=p>}</span>

            <span class=c1>// Configure.</span>
            <span class=kt>byte</span> <span class=n>conf</span> <span class=o>=</span> <span class=n>ADXL345_SELF_TEST_OFF</span><span class=p>;</span>
            <span class=n>conf</span> <span class=o>|=</span> <span class=n>ADXL345_SPI_OFF</span><span class=p>;</span>
            <span class=n>conf</span> <span class=o>|=</span> <span class=n>ADXL345_INT_INVERT_OFF</span><span class=p>;</span>
            <span class=n>conf</span> <span class=o>|=</span> <span class=n>ADXL345_FULL_RES_OFF</span><span class=p>;</span>
            <span class=n>conf</span> <span class=o>|=</span> <span class=n>ADXL345_JUSTIFY_OFF</span><span class=p>;</span>
            <span class=n>conf</span> <span class=o>|=</span> <span class=n>ADXL345_RANGE_16G</span><span class=p>;</span>
            <span class=n>mDevice</span><span class=p>.</span><span class=na>writeRegByte</span><span class=p>(</span><span class=n>ADXL345_DATA_FORMAT_REG</span><span class=p>,</span> <span class=n>conf</span><span class=p>);</span>

            <span class=c1>// PowerOn.</span>
            <span class=kt>byte</span> <span class=n>power</span> <span class=o>=</span> <span class=n>ADXL345_AUTO_SLEEP_OFF</span><span class=p>;</span>
            <span class=n>power</span> <span class=o>|=</span> <span class=n>ADXL345_MEASURE_ON</span><span class=p>;</span>
            <span class=n>power</span> <span class=o>|=</span> <span class=n>ADXL345_SLEEP_OFF</span><span class=p>;</span>
            <span class=n>power</span> <span class=o>|=</span> <span class=n>ADXL345_WAKEUP_8HZ</span><span class=p>;</span>
            <span class=n>mDevice</span><span class=p>.</span><span class=na>writeRegByte</span><span class=p>(</span><span class=n>ADXL345_POWER_CTL_REG</span><span class=p>,</span> <span class=n>power</span><span class=p>);</span>

            <span class=c1>// Handler.</span>
            <span class=n>mHandler</span><span class=p>.</span><span class=na>post</span><span class=p>(</span><span class=n>mAxisRunnable</span><span class=p>);</span>
        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=kd>private</span> <span class=n>Runnable</span> <span class=n>mAxisRunnable</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Runnable</span><span class=p>()</span> <span class=p>{</span>
        <span class=nd>@Override</span>
        <span class=kd>public</span> <span class=kt>void</span> <span class=nf>run</span><span class=p>()</span> <span class=p>{</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>mDevice</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
                <span class=k>return</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=k>try</span> <span class=p>{</span>
                <span class=kt>int</span> <span class=n>length</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span>
                <span class=kt>byte</span> <span class=n>axis_buff</span><span class=o>[]</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>byte</span><span class=o>[</span><span class=n>length</span><span class=o>]</span><span class=p>;</span>
                <span class=n>mDevice</span><span class=p>.</span><span class=na>readRegBuffer</span><span class=p>(</span><span class=n>ADXL345_3AIXS</span><span class=p>,</span> <span class=n>axis_buff</span><span class=p>,</span> <span class=n>axis_buff</span><span class=p>.</span><span class=na>length</span><span class=p>);</span>
                <span class=n>mHandler</span><span class=p>.</span><span class=na>postDelayed</span><span class=p>(</span><span class=n>mAxisRunnable</span><span class=p>,</span> <span class=n>INTERVAL_BETWEEN_AXIS_MS</span><span class=p>);</span>
                <span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=p>(((</span><span class=kt>int</span><span class=p>)</span><span class=n>axis_buff</span><span class=o>[</span><span class=mi>1</span><span class=o>]</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=mi>8</span><span class=p>)</span> <span class=o>|</span> <span class=n>axis_buff</span><span class=o>[</span><span class=mi>0</span><span class=o>]</span><span class=p>;</span>
                <span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=p>(((</span><span class=kt>int</span><span class=p>)</span><span class=n>axis_buff</span><span class=o>[</span><span class=mi>3</span><span class=o>]</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=mi>8</span><span class=p>)</span> <span class=o>|</span> <span class=n>axis_buff</span><span class=o>[</span><span class=mi>2</span><span class=o>]</span><span class=p>;</span>
                <span class=kt>int</span> <span class=n>z</span> <span class=o>=</span> <span class=p>(((</span><span class=kt>int</span><span class=p>)</span><span class=n>axis_buff</span><span class=o>[</span><span class=mi>5</span><span class=o>]</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=mi>8</span><span class=p>)</span> <span class=o>|</span> <span class=n>axis_buff</span><span class=o>[</span><span class=mi>4</span><span class=o>]</span><span class=p>;</span>

                <span class=n>Log</span><span class=p>.</span><span class=na>i</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span> <span class=s>&quot;x=&quot;</span> <span class=o>+</span> <span class=n>x</span> <span class=o>+</span> <span class=s>&quot; y=&quot;</span> <span class=o>+</span> <span class=n>y</span> <span class=o>+</span> <span class=s>&quot; z=&quot;</span> <span class=o>+</span> <span class=n>z</span><span class=p>);</span>

            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>Log</span><span class=p>.</span><span class=na>e</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span> <span class=s>&quot;Error on I2C Device API&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>};</span>

    <span class=nd>@Override</span>
    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onDestroy</span><span class=p>()</span> <span class=p>{</span>
        <span class=kd>super</span><span class=p>.</span><span class=na>onDestroy</span><span class=p>();</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>mDevice</span> <span class=o>!=</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>try</span> <span class=p>{</span>
                <span class=n>mDevice</span><span class=p>.</span><span class=na>close</span><span class=p>();</span>
                <span class=n>mDevice</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=n>IOException</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>Log</span><span class=p>.</span><span class=na>w</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span> <span class=s>&quot;Unable to close I2C device&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>

<span class=p>}</span>
</code></pre></div></td></tr></table></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="">
        
          <a href="../217_ambient/" title="201 3Axis" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  前
                </span>
                201 3Axis
              </div>
            </div>
          </a>
        
        
          <a href="../3axisui/" title="3Axis" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  次
                </span>
                3Axis
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.83fe6e3c.min.js"></script>
      <script src="../assets/javascripts/bundle.7e1cb91c.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "search.config.lang": "ja", "search.config.pipeline": "", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>